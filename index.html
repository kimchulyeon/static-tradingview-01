<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script type="text/javascript" src="https://s3.tradingview.com/tv.js"></script>
    <script src="./exchangeInfo.js"></script>
    <title>TRADING VIEW</title>
  </head>
  <body>
    <div>
      <select onchange="loadChart()" id="pairs"></select>
    </div>
    <br />
    <hr />
    <div>
      <div class="tradingview-widget-container" id="tvchart"></div>
    </div>

    <script>
      // SYMBOLS
      var sym = exchangeInfo.symbols;
      var markup = '';
      sym.forEach((d) => {
        markup += `<option value='${d.symbol}'>${d.symbol}</option>`;
      });
      document.querySelector('#pairs').innerHTML = markup;

      const loadChart = () => {
        let symbol = document.querySelector('#pairs').value;

        new TradingView.widget({
          autosize: true,
          symbol: `BINANCE:${symbol}`,
          interval: 'D',
          timezone: 'Etc/UTC',
          theme: 'light',
          style: '1',
          locale: 'in',
          toolbar_bg: '#f1f3f6',
          enable_publishing: false,
          allow_symbol_change: true,
          container_id: 'tvchart',
        });
      };

      loadChart();
    </script>
  </body>
</html>
